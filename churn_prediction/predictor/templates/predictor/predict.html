{% extends 'predictor/base.html' %}

{% block content %}
<div class="container">
    <div class="card">
        <div class="card-header">
            <h2>Customer Churn Prediction</h2>
        </div>
        <div class="card-body">
            {% if error %}
            <div class="alert alert-danger">
                {{ error }}
            </div>
            {% endif %}

            <form method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label class="form-label" for="age">Age</label>
                    <input type="number" name="age" id="age" class="form-control" required 
                           value="{% if input_data %}{{ input_data.Age }}{% endif %}">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="balance">Balance</label>
                    <input type="number" step="0.01" name="balance" id="balance" class="form-control" required 
                           value="{% if input_data %}{{ input_data.Balance }}{% endif %}">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="tenure">Tenure</label>
                    <input type="number" name="tenure" id="tenure" class="form-control" required 
                           value="{% if input_data %}{{ input_data.Tenure }}{% endif %}">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="num_of_products">Number of Products</label>
                    <input type="number" name="num_of_products" id="num_of_products" class="form-control" required 
                           value="{% if input_data %}{{ input_data.NumOfProducts }}{% endif %}">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="estimated_salary">Estimated Salary</label>
                    <input type="number" step="0.01" name="estimated_salary" id="estimated_salary" class="form-control" required 
                           value="{% if input_data %}{{ input_data.EstimatedSalary }}{% endif %}">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="credit_score">Credit Score</label>
                    <input type="number" name="credit_score" id="credit_score" class="form-control" required 
                           value="{% if input_data %}{{ input_data.CreditScore }}{% endif %}">
                </div>
                
                <div class="form-group checkbox-group">
                    <input type="checkbox" name="gender_male" id="gender_male" 
                           {% if input_data and input_data.Gender_Male %}checked{% endif %}>
                    <label class="form-label" for="gender_male">Male Gender</label>
                </div>
                
                <button type="submit" class="btn">Predict Churn</button>
            </form>

            {% if prediction is not None %}
                <div class="alert {% if prediction %}alert-danger{% else %}alert-success{% endif %}">
                    <h4>Prediction Result:</h4>
                    <p>Customer is {% if prediction %}likely{% else %}not likely{% endif %} to churn.</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}